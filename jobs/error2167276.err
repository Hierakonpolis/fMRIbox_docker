+ set -e
+ FSLDIR=/usr/share/fsl/5.0
+ export PATH=/usr/lib/ants:.:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/ROBEX:/usr/lib/ants
+ PATH=/usr/lib/ants:.:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/ROBEX:/usr/lib/ants
+ export ANTSPATH=/usr/lib/ants
+ ANTSPATH=/usr/lib/ants
+ export AFNIbinPATH=/usr/local/AFNIbin
+ AFNIbinPATH=/usr/local/AFNIbin
+ PATH=/usr/local/AFNIbin:/usr/lib/ants:.:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/ROBEX:/usr/lib/ants
+ PATH=/usr/share/fsl/5.0/bin:/usr/local/AFNIbin:/usr/lib/ants:.:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/ROBEX:/usr/lib/ants
+ export FSLDIR PATH
+ . /usr/share/fsl/5.0/etc/fslconf/fsl.sh
+++ echo /usr/share/fsl/5.0/bin:/usr/local/AFNIbin:/usr/lib/ants:.:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/ROBEX:/usr/lib/ants
+++ grep -v /usr/lib/fsl/
+++ sed 's/:$//'
+++ tr -s '\n' :
+++ tr : '\n'
++ PATH=/usr/share/fsl/5.0/bin:/usr/local/AFNIbin:/usr/lib/ants:.:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/ROBEX:/usr/lib/ants
+++ tr : '\n'
+++ grep -v /usr/lib/fsl/
+++ tr -s '\n' :
+++ sed 's/:$//'
+++ echo /.singularity.d/libs
++ LD_LIBRARY_PATH=/.singularity.d/libs
++ FSLDIR=/usr/share/fsl/5.0
++ POSSUMDIR=/usr/share/fsl/5.0
++ PATH=/usr/lib/fsl/5.0:/usr/share/fsl/5.0/bin:/usr/local/AFNIbin:/usr/lib/ants:.:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/ROBEX:/usr/lib/ants
++ FSLOUTPUTTYPE=NIFTI_GZ
++ FSLMULTIFILEQUIT=TRUE
++ FSLTCLSH=/usr/bin/tclsh
++ FSLWISH=/usr/bin/wish
++ FSLBROWSER=/etc/alternatives/x-www-browser
++ FSLLOCKDIR=
++ FSLMACHINELIST=
++ FSLREMOTECALL=
++ FSLCLUSTER_MAILOPTS=n
++ export FSLDIR POSSUMDIR PATH FSLMULTIFILEQUIT FSLOUTPUTTYPE FSLTCLSH FSLWISH FSLBROWSER FSLLOCKDIR FSLMACHINELIST FSLREMOTECALL
++ LD_LIBRARY_PATH=/usr/lib/fsl/5.0:/.singularity.d/libs
++ export LD_LIBRARY_PATH
++ '[' -f /home/users/jwardell1/.fslconf/fsl.sh ']'
+ subjectID=000300655084
+ subIDpath=/data/000300655084
++ dirname /data/000300655084
+ subPath=/data
++ date +%s
+ start=1676648366
+ echo 'subIDpath: /data/000300655084'
+ echo 'subPath: /data'
+ echo 'subjectID: 000300655084'
+ acqparams=/data/derivatives/acqparams.txt
+ template=/usr/share/fsl/data/standard/MNI152_T1_2mm_brain.nii.gz
+ templatemask=/usr/share/fsl/data/standard/MNI152_T1_2mm_brain_mask.nii.gz
+ mkdir -p /data/derivatives/000300655084
+ mkdir -p /data/derivatives/000300655084/bias_field
+ mocodir=/data/derivatives/000300655084/motion
+ coregdir=/data/derivatives/000300655084/coregistration
+ normdir=/data/derivatives/000300655084/normalization
+ procdir=/data/derivatives/000300655084/processed
+ anatdir=/data/derivatives/000300655084/anat
+ echo mocodir: /data/derivatives/000300655084/motion
+ echo coregdir: /data/derivatives/000300655084/coregistration
+ echo normdir: /data/derivatives/000300655084/normalization
+ echo procdir: /data/derivatives/000300655084/processed
+ echo anatdir: /data/derivatives/000300655084/anat
+ mkdir -p /data/derivatives/000300655084/coregistration
+ mkdir -p /data/derivatives/000300655084/motion
+ mkdir -p /data/derivatives/000300655084/normalization
+ mkdir -p /data/derivatives/000300655084/processed
+ mkdir -p /data/derivatives/000300655084/anat
+ AFNI_PID=
+ TOPUP_PID=
+ SKULL_PID=1954825
+ wait 1954825
+ skullstrip /data/000300655084 /data 000300655084 /data/derivatives/000300655084/anat
+ echo 'function skullstrip was called'
+ subIDpath=/data/000300655084
+ subPath=/data
+ subjectID=000300655084
+ anatdir=/data/derivatives/000300655084/anat
+ N4BiasFieldCorrection -d 3 -i /data/000300655084/anat/T1.nii -o /data/derivatives/000300655084/anat/T1_bc.nii
+ echo anatdir /data/derivatives/000300655084/anat
+ echo subjectID 000300655084
+ cd /ROBEX
+ ./ROBEX /data/derivatives/000300655084/anat/T1_bc.nii /data/derivatives/000300655084/anat/T1_bc_ss.nii
+ echo 'finished skullstrip'
+ ANTS_PID=1954825
+ wait
+ vrefbrain=T1_bc_ss.nii
+ vrefhead=T1_bc.nii
+ vepi=rest.nii
+ vout=000300655084_rfMRI_v0_correg
+ epi_orig=/data/000300655084/func/rest.nii
+ echo vepi rest.nii
+ echo epi_orig /data/000300655084/func/rest.nii
+ 3dcalc -a0 /data/000300655084/func/rest.nii -prefix /data/derivatives/000300655084/coregistration/rest.nii -expr 'a*1'
++ 3dcalc: AFNI version=AFNI_22.1.14 (Jun 24 2022) [64-bit]
++ Authored by: A cast of thousands
[7m** ERROR:[0m output dataset name 'rest.nii' conflicts with existing file
[7m** ERROR:[0m dataset NOT written to disk!
+ epireg_set /data/derivatives/000300655084/coregistration T1_bc_ss.nii rest.nii 000300655084_rfMRI_v0_correg T1_bc.nii
++ date +%s
+ echo 'funcion epireg_set was called'
+ coregdir=/data/derivatives/000300655084/coregistration
+ vrefbrain=T1_bc_ss.nii
+ vepi=rest.nii
+ vout=000300655084_rfMRI_v0_correg
+ vrefhead=T1_bc.nii
+ echo 'coregdir /data/derivatives/000300655084/coregistration'
+ echo 'vrefbrain T1_bc_ss.nii'
+ echo 'vepi rest.nii'
+ echo 'vout 000300655084_rfMRI_v0_correg'
+ cd /data/derivatives/000300655084/coregistration
+ /usr/share/fsl/5.0/bin/fast -N -o 000300655084_rfMRI_v0_correg_fast T1_bc_ss.nii
+ start=1676648482
+ echo AA
+ 1deval -num 25 -expr t+10
+ echo AAA
+ SCMOCO_PID=2061096
+ echo AAAA
+ echo 'waiting for moco'
+ wait 2061096
+ moco_sc /data/000300655084/func/rest.nii /data/derivatives/000300655084/coregistration/rest.nii 000300655084 rest
+ echo 'function moco_sc was called'
+ epi_in=/data/000300655084/func/rest.nii
+ ref_vol=/data/derivatives/000300655084/coregistration/rest.nii
+ subjectID=000300655084
+ suffix=rest
+ cd /data/derivatives/000300655084/motion
+ echo 'inside moco function 1 - don'\''t need to pull slice timing from json file, use dataseries.txt'
+ echo 'inside moco fucntion 2 - no need to find place where 0 occurs out of order, FBIRN fine'
+ TR=2
+ echo 'inside moco fucntion 3 - FBIRN I already know the slice timing should be TR=2'
+ 3dDespike -NEW -prefix Despike_rest.nii.gz /data/000300655084/func/rest.nii
Image Exception : #22 :: ERROR: Could not open image T1_bc_ss
terminate called after throwing an instance of 'RBD_COMMON::BaseException'
++ 3dDespike: AFNI version=AFNI_22.1.14 (Jun 24 2022) [64-bit]
++ Authored by: RW Cox
[7m*+ WARNING:[0m   If you are performing spatial transformations on an oblique dset,
  such as /data/000300655084/func/rest.nii,
  or viewing/combining it with volumes of differing obliquity,
  you should consider running: 
     3dWarp -deoblique 
  on this and  other oblique datasets in the same session.
 See 3dWarp -help for details.
++ Oblique dataset:/data/000300655084/func/rest.nii is 1.753123 degrees from plumb.
++ Input dataset is in short format, but output will be in float format
++ ignoring first 0 time points, using last 162
++ using 162 time points => -corder 5
++ Loading dataset /data/000300655084/func/rest.nii
/run/pd_dockerParralelized_fbirn.sh: line 169: 2061094 Aborted                 (core dumped) $FSLDIR/bin/fast -N -o ${vout}_fast ${vrefbrain}
++ 23483 voxels in the automask [out of 131072 in dataset]
++ 44110 voxels in the dilated automask [out of 131072 in dataset]
++ Procesing time series with NEW model fit algorithm
++ smash edit thresholds: 3.1 .. 5.0 MADs
 +   [ 3.457% .. 0.072% of normal distribution]
 +   [ 8.839% .. 3.125% of Laplace distribution]
++ start OpenMP thread #0
++ start OpenMP thread #1
++ start OpenMP thread #2
++ start OpenMP thread #3
..................
++ Elapsed despike time =  373ms

++ FINAL: 7145172 data points, 466724 edits [6.532%], 158290 big edits [2.215%]
[7m** ERROR:[0m output dataset name 'Despike_rest.nii.gz' conflicts with existing file
[7m** ERROR:[0m dataset NOT written to disk!
